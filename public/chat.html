<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>对话</title>
    <link rel="icon" type="image/x-icon" href="image/favicon.ico">
    <!-- 图标的显示 -->
    <style>
        body {
            background-image: url("image/background.jpg");
            /* 图片路径 */
            background-size: cover;
            /* 使背景图覆盖整个页面 */
            background-position: center;
            /* 背景图片居中 */
            background-repeat: no-repeat;
            /* 防止背景图重复 */
        }

        /* 弹窗遮罩层 */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        /* 弹窗主体 */
        .dialog {
            background: #d5def4;
            width: 400px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            padding: 24px;
            position: relative;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* 标题样式 */
        .dialog-title {
            color: #000000;
            font-size: 20px;
            margin: 0 0 16px;
            font-weight: 600;
        }

        /* 问题文本 */
        .question-text {
            color: #000000;
            font-size: 16px;
            margin: 0 0 20px;
            line-height: 1.5;
        }

        /* 输入框容器 */
        .input-group {
            margin-bottom: 24px;
        }

        /* 输入框样式 */
        .answer-input {
            width: 100%;
            padding: 12px;
            background: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #dcddde;
            font-size: 14px;
            transition: all 0.2s;
        }

        .answer-input:focus {
            outline: none;
            border-color: #7289da;
            box-shadow: 0 0 0 2px rgba(114, 137, 218, 0.3);
        }

        /* 按钮容器 */
        .button-group {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        /* 按钮基础样式 */
        .dialog-btn {
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }

        /* 上一题按钮 */
        .btn-prev {
            background: #7398d4;
            color: #fff;
            margin-right: auto;
        }

        .btn-prev:hover {
            background: #5d6269;
        }

        .btn-prev:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* 跳过/完成按钮 */
        .btn-skip {
            background: #7289da;
            color: white;
        }

        .btn-skip:hover {
            background: #677bc4;
        }

        /* 完成状态按钮 */
        .btn-complete {
            background: #4b84c5;
        }

        .btn-complete:hover {
            background: #2d7cc7;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .chat-container {
            float: left;
            width: 60%;
            max-width: 1100px;
            margin: 40px auto;
            display: flex;
            flex-direction: column;
            height: 80vh;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            overflow: hidden;
        }

        .chat-header {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .conversation-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background-color: white;
        }

        .aa {
            /* background-color: red; */
            height: 900px;
        }

        .bb {
            float: left;
            margin-top: 250px;

            /* background-color: black; */
            max-width: 20%;
            height: 500px;
        }


        body .dd {
            float: right;
            margin-top: 40px;
            width: 20%;
            height: 500px;
        }

        .my-button {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            /* 绿色背景 */
            color: white;
            /* 白色文字 */
            padding: 15px 32px;
            /* 内边距 */
            text-align: center;
            /* 文字居中 */
            text-decoration: none;
            /* 去掉下划线 */
            display: inline-block;
            /* 行内块元素 */
            font-size: 16px;
            /* 字体大小 */
            margin: 4px 2px;
            /* 外边距 */
            cursor: pointer;
            /* 鼠标指针样式 */
            border: none;
            /* 去掉边框 */
            border-radius: 8px;
            /* 圆角 */
            margin-top: 50px;
        }

        /* Header section styling */
        .chat-header {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        /* Conversation area styling */
        .conversation-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background-color: white;
        }

        /* Individual message styling */
        .message {
            display: flex;
            max-width: 80%;
            position: relative;
        }

        .user-message {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .ai-message {
            align-self: flex-start;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #e1e1e1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            margin: 0 8px;
        }

        .user-avatar {
            background-color: #6e8efb;
            color: white;
        }

        .ai-avatar {
            background-color: #a655cf;
            color: white;
        }

        .message-content {
            background-color: #f0f2f5;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 0.95rem;
            max-width: calc(100% - 56px);
        }

        .user-message .message-content {
            background-color: #dcebff;
        }

        .ai-message .message-content {
            background-color: #f5f0ff;
        }

        /* Input area styling */
        .input-container {
            display: flex;
            padding: 15px;
            background-color: white;
            border-top: 1px solid #e1e1e1;
        }

        .message-input {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 24px;
            padding: 12px 20px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s;
        }

        .message-input:focus {
            border-color: #6e8efb;
        }

        .send-button {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
            border: none;
            border-radius: 50%;
            width: 46px;
            height: 46px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }

        .send-button:hover {
            transform: scale(1.05);
        }

        .send-button:active {
            transform: scale(0.95);
        }

        /* Typing indicator animation */
        .typing-indicator {
            display: none;
            align-self: flex-start;
            background-color: #f5f0ff;
            padding: 12px 16px;
            border-radius: 18px;
        }

        .typing-indicator span {
            height: 8px;
            width: 8px;
            background: #a777e3;
            display: inline-block;
            border-radius: 50%;
            opacity: 0.4;
            margin: 0 1px;
            animation: typing 1s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0% {
                opacity: 0.4;
                transform: translateY(0);
            }

            50% {
                opacity: 1;
                transform: translateY(-5px);
            }

            100% {
                opacity: 0.4;
                transform: translateY(0);
            }
        }

        /* Responsiveness for mobile devices */
        @media (max-width: 768px) {
            .chat-container {
                margin: 0;
                height: 100vh;
                border-radius: 0;
            }

            .message {
                max-width: 90%;
            }
    </style>

</head>

<body>
    <div class="aa">
        <div class="bb">

            <div class="bbbb">
                <img src="image/卡通人物.png" width="200px">
            </div>

        </div>
        <!--                                   -->
        <div class="chat-container">
            <div class="chat-header">
                和“智微医道”对话
            </div>
            <div class="conversation-container" id="conversation">
                <!-- AI welcome message will be added here on page load -->
            </div>
            <div class="typing-indicator" id="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="input-container">
                <input type="text" class="message-input" id="message-input" placeholder="Type your message here..."
                    autocomplete="off">
                <button class="send-button" id="send-button">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </div>
        <!--                         -->
        <div class="dd">
            <button class="my-button" onclick="redirectToPage()">跳转到新页面</button>
            <button class="my-button" onclick="redirectToPage()">跳转到新页面</button>
            <button class="my-button" onclick="redirectToPage()">跳转到新页面</button>
            <button class="my-button" onclick="redirectToPage()">跳转到新页面</button>


        </div>
        <!-- 问答弹窗 -->
        <div class="overlay" id="overlay">
            <div class="dialog">
                <h2 class="dialog-title" id="questionTitle">第1题：基础信息</h2>
                <p class="question-text" id="questionText">请简单介绍一下你自己</p>

                <div class="input-group">
                    <input type="text" class="answer-input" id="answerInput" placeholder="请输入你的回答...">
                </div>

                <div class="button-group">
                    <button class="dialog-btn btn-prev" id="prevButton" disabled>← 上一题</button>
                    <button class="dialog-btn btn-skip" id="skipButton">下一步 →</button>
                </div>
            </div>
        </div>

        <script>
            // 问题数据
            const questions = [
                {
                    title: "第1题：基础信息",
                    text: "请简单介绍一下你自己",
                },
                {
                    title: "第2题：兴趣爱好",
                    text: "你的主要兴趣爱好是什么？",
                },
                {
                    title: "第3题：使用目的",
                    text: "你希望在这里获得什么？",
                },
                {
                    title: "第4题：完成",
                    text: "感谢参与！",
                }
            ];

            let currentQuestionIndex = 0;
            const userAnswers = new Array(questions.length);

            // DOM元素
            const overlay = document.getElementById("overlay");
            const questionTitle = document.getElementById("questionTitle");
            const questionText = document.getElementById("questionText");
            const answerInput = document.getElementById("answerInput");
            const skipButton = document.getElementById("skipButton");
            const prevButton = document.getElementById("prevButton");

            // 更新问题显示
            function updateQuestion() {
                const question = questions[currentQuestionIndex];
                questionTitle.textContent = question.title;
                questionText.textContent = question.text;
                answerInput.value = userAnswers[currentQuestionIndex] || "";

                // 更新按钮状态
                prevButton.disabled = currentQuestionIndex === 0;
                skipButton.textContent = currentQuestionIndex === questions.length - 1 ? "完成" : "下一步 →";
                skipButton.className = `dialog-btn ${currentQuestionIndex === questions.length - 1 ? 'btn-complete' : 'btn-skip'}`;

                // 最后一题隐藏输入框
                if (currentQuestionIndex === questions.length - 1) {
                    answerInput.style.display = 'none';
                } else {
                    answerInput.style.display = 'block';
                }
            }

            // 下一步逻辑
            function goToNextQuestion() {
                userAnswers[currentQuestionIndex] = answerInput.value;

                if (currentQuestionIndex < questions.length - 1) {
                    currentQuestionIndex++;
                    updateQuestion();
                } else {
                    overlay.style.display = 'none';
                    console.log('用户回答：', userAnswers);
                    // 移除或注释掉以下这行代码
                    // alert('问卷提交成功！');
                }
            }

            // 上一步逻辑
            function goToPreviousQuestion() {
                userAnswers[currentQuestionIndex] = answerInput.value;
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    updateQuestion();
                }
            }

            // 按钮事件处理
            skipButton.addEventListener("click", goToNextQuestion);
            prevButton.addEventListener("click", goToPreviousQuestion);

            // 回车键事件处理
            answerInput.addEventListener("keydown", (event) => {
                if (event.key === "Enter") {
                    goToNextQuestion();
                }
            });

            // 初始化
            updateQuestion();
        </script>

        /* 中间部分的对话 */

        <script>
            // Main JavaScript for the chat functionality
            document.addEventListener('DOMContentLoaded', function () {
                // Get DOM elements
                const conversationContainer = document.getElementById('conversation');
                const messageInput = document.getElementById('message-input');
                const sendButton = document.getElementById('send-button');
                const typingIndicator = document.getElementById('typing-indicator');

                // Sample responses database - you would replace this with actual API calls
                const sampleResponses = [
                    "I'm an AI assistant. How can I help you today?",
                    "That's an interesting question. Let me think about that...",
                    "I understand your question. Here's what I know about this topic...",
                    "Could you provide more details about your question?",
                    "Based on my knowledge, there are several approaches to this problem.",
                    "I'd be happy to help you with that! Let me explain...",
                    "That's a complex topic. Let me break it down for you...",
                    "Thank you for sharing that information. Here's my perspective...",
                    "I appreciate your patience. Here's what I've found on this subject..."
                ];

                // Add welcome message when page loads
                addMessage(" 您好！我是医疗AI助手，请问有什么可以帮助您的？", 'ai');

                // Event listeners
                sendButton.addEventListener('click', sendMessage);
                messageInput.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });

                // Function to send a message
                function sendMessage() {
                    const messageText = messageInput.value.trim();
                    if (messageText === '') return;

                    // Add user message to conversation
                    addMessage(messageText, 'user');
                    messageInput.value = '';

                    // Show typing indicator
                    typingIndicator.style.display = 'block';
                    conversationContainer.scrollTop = conversationContainer.scrollHeight;

                    // Simulate AI response delay
                    setTimeout(() => {
                        // Hide typing indicator
                        typingIndicator.style.display = 'none';

                        // In a real app, you would call your AI API here
                        // For demo purposes, we'll use a random sample response
                        const aiResponse = getAIResponse(messageText);
                        addMessage(aiResponse, 'ai');
                    }, 1500);
                }

                // Function to add a message to the conversation
                function addMessage(text, sender) {
                    const messageElement = document.createElement('div');
                    messageElement.classList.add('message', `${sender}-message`);

                    const avatarElement = document.createElement('div');
                    avatarElement.classList.add('avatar', `${sender}-avatar`);
                    avatarElement.textContent = sender === 'user' ? 'U' : 'AI';

                    const contentElement = document.createElement('div');
                    contentElement.classList.add('message-content');

                    // Process text to handle markdown-style formatting
                    text = processText(text);
                    contentElement.innerHTML = text;

                    messageElement.appendChild(avatarElement);
                    messageElement.appendChild(contentElement);

                    conversationContainer.appendChild(messageElement);
                    conversationContainer.scrollTop = conversationContainer.scrollHeight;
                }

                // Function to process text and handle basic formatting
                function processText(text) {
                    // Handle code blocks
                    text = text.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');

                    // Handle inline code
                    text = text.replace(/`([^`]+)`/g, '<code>$1</code>');

                    // Handle bold text
                    text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');

                    // Handle italic text
                    text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');

                    // Convert URLs to links
                    text = text.replace(
                        /(https?:\/\/[^\s]+)/g,
                        '<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>'
                    );

                    // Convert line breaks to <br>
                    text = text.replace(/\n/g, '<br>');

                    return text;
                }

                // Function to get AI response - in a real app, this would call an API
                function getAIResponse(userMessage) {
                    // This is where you would integrate with an actual AI API
                    // For now, we'll use keyword matching for demo purposes
                    userMessage = userMessage.toLowerCase();

                    if (userMessage.includes('hello') || userMessage.includes('hi')) {
                        return "Hello there! How can I assist you today?";
                    } else if (userMessage.includes('help')) {
                        return "I'm here to help! Feel free to ask me questions about any topic.";
                    } else if (userMessage.includes('thank')) {
                        return "You're welcome! Is there anything else I can help with?";
                    } else if (userMessage.includes('how are you')) {
                        return "I'm functioning well, thank you for asking! How about you?";
                    } else if (userMessage.includes('bye')) {
                        return "Goodbye! Feel free to return if you have more questions.";
                    } else if (userMessage.length < 10) {
                        return "Could you elaborate more on that? I'd like to understand your question better.";
                    } else {
                        // Get a random response for other queries
                        const randomIndex = Math.floor(Math.random() * sampleResponses.length);
                        return sampleResponses[randomIndex];
                    }
                }

                // Focus the input field when the page loads
                messageInput.focus();
            });
        </script>
</body>

</html>